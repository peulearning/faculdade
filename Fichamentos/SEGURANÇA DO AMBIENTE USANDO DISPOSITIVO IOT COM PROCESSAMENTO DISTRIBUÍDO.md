
**RESUMO**

Nos últimos tempos, o conceito de reconhecimento facial ganhou grande popularidade. Graças à evolução da Internet das coisas (IoT), as ideias para monitorar com smartphones e outros dispositivos agora parecem possíveis. Problemas como o reconhecimento facial para entrada em ambientes estão sendo abordados pela IoT. Neste artigo, apresentamos um sistema integrado de dispositivos inteligentes Fog baseado em IoT. A solução proposta de uma implantação no local de um módulo de IoT que é usado para monitorar e anunciar a pessoa que entrou em uma sala, por exemplo. E o aplicativo bot também é fornecido, permitindo que o usuário final verifique os rostos de acordo. Esse artigo também descreve uma visão de alto nível da arquitetura do sistema. No final, é discutido o funcionamento do sistema na forma de um caso de uso que comprova a correção do modelo proposto.

 **INTRODUÇÃO** 
 
  Como grande parte da população vive em áreas urbanas e tem acesso à Internet, a quantidade de dados gerados está aumentando, portanto, é necessário adequar-se a essa nova realidade [Gubbi et al.]. Uma das razões para esse aumento é que as pessoas estão usando dispositivos IoT diariamente, como telefones celulares, TV inteligente, relógios inteligentes e veículos conectados; consequentemente, é necessário usar técnicas de análise de dados para entender o comportamento dessa grande quantidade de informações [Rathore et al.]. Com os recentes avanços tecnológicos, novas soluções para coletar informações ambientais e executar automaticamente tarefas no mundo "real" foram adotadas de uma maneira anteriormente inimaginável. A Internet das Coisas (IoT) surgiu propondo um gerenciamento automatizado da cadeia de suprimentos viável e passou a ser usada em outros campos, como assistência médica, automação residencial e cidades inteligentes [Shi & Dustdar]. A tecnologia IoT está crescendo em muitas áreas de pesquisa e isso é causado por sua capacidade de coletar e enviar dados com o mínimo de interferência humana. Os dados são coletados pelos sensores ou câmeras presentes nos dispositivos e podem ser usados em aplicações estratégicas, como monitoramento climático ou monitoração interna de edifícios, para melhorar o gerenciamento, como reconhecimento facial [Swamy & Sowmyarani]. Mas esse tipo de software precisa reunir muitos dados para ser mais eficiente e assertivo. Lidar com esse grande volume de dados é um desafio em todas as áreas de tecnologias. O uso da inteligência artificial é comum para aprimorar uma nova análise e processo de construção de novos dispositivos [Tsai et al.]. Recentemente, adotamos o conceito de Fog Computing para conectar aplicativos em muitos dispositivos inteligentes. A ideia é criar uma camada entre os gadgets e a nuvem, alocando os recursos próprios da organização para serem usados adequadamente. Esse paradigma foi desenvolvido para aplicações em tempo real, como abordagens de big data e ciência de dados, e com isso é possível aumentar a velocidade de transmissão e diminuir a latência [Stojmenovic].

 **TRABALHOS RELACIONADOS**
  A IoT e o reconhecimento facial foram tópicos importantes na pesquisa acadêmica nos últimos anos e a combinação desses tópicos pode ajudar em vários problemas atuais, como encontrar pessoas perdidas usando câmeras de vigilância. O trabalho de [Amin et al.] descreve um esquema de reconhecimento de rosto descentralizado usando câmeras de vigilância distribuídas usando IoT em conjunto com arquitetura em nuvem. Eles usaram o método Viola-Jones [Viola & Jones]. Implementado através da biblioteca de visão computacional OpenCV como o método oficial de detecção de rosto, chamado Haar Cascades. O foco deste estudo é apresentar o processo de extração de faces em um dispositivo local e enviá-lo para que a classificação seja realizada em nuvem. Em [Mano et al.] é apresentado outro estudo sobre este assunto, que utiliza IoT para melhorar os hospitais usando conceitos de dispositivos inteligentes, usando as características faciais dos pacientes, é possível identificá-lo e também reconhecer a emoção do paciente. Capturar a foto e processar a detecção e o reconhecimento de faces em um dispositivo na rede local do paciente e, em seguida, envia apenas as informações relevantes para as camadas superiores a serem mostradas no sistema. Foram utilizadas técnicas como k-Nearest Neighbor (kNN) e Support Vector Machine (SVM) [Mitchell] para identificar o paciente e o Face Tracker Algorithm [Libralon & Romero] para detectar rostos usando 66 pontos de recurso. [Hossain et al.] apresentaram um trabalho que usa a IoT e a geometria da face para fazer a identificação baseada em biometria facial para facilitar a autenticação. Neste artigo, os autores mostram uma solução modelada que inclui sensores locais que enviam dados para dispositivos de comunicação em nuvem. Os dispositivos de comunicação são aqueles que atuam como gateways de IoT.

 **MIDDLEWARE IOT PROPOSTO PARA RECONHECIMENTO DE FACE USANDO O FOG COMPUTING** 
  O objetivo deste artigo é desenvolver uma solução de identificação por meio do reconhecimento de face usando processamento distribuído, reduzindo assim a necessidade de enviar dados de streaming para a nuvem e aumentar a flexibilidade de mover o hardware para o processamento local. À medida que a qualidade da câmera aumentou, houve um crescimento exponencial na quantidade de soluções de segurança de dados necessárias para transmitir. A arquitetura proposta tem como objetivo armazenar e processar dados localmente, relatando eventos de interesse do usuário.

**Processo Proposto**

 O processo monitoramento é realizado em três etapas: registro, treinamento e monitoramento. A etapa de registro é a primeira e consiste na inclusão de imagens de pessoas feitas por um usuário. Este usuário deve registrar pessoas, sendo necessário informar o nome e algumas fotos de seus rostos. Para melhorar a precisão do reconhecimento, é importante que pelo menos três fotos de cada pessoa sejam registradas. A etapa de treinamento ocorre quando as pessoas e suas fotos são submetidas a um algoritmo de aprendizado de máquina para gerar um modelo que será utilizado para realizar a identificação facial e reconhecimento da pessoa cadastrada previamente nessa base de dados. Finalmente, na etapa de monitoramento as câmeras de vídeo são usadas para monitorar uma área para identificar pessoas conhecidas. Nesse passo, dois mecanismos são usados continuamente: detecção de rosto para detectar a presença de um rosto em uma imagem e, ao detectar uma pessoa, reconhecimento de rosto. Em seguida, conforme configurado anteriormente, são gerados alertas e notificações sobre as pessoas detectadas nas imagens.


**Arquitetura Proposta** 

 A solução é baseada no uso dos paradigmas IoT, Fog e Cloud Computing. Ao reconhecer um usuário, o dispositivo envia uma notificação ao Middleware informando que um usuário específico entrou na sala, permitindo que sensores e dispositivos inteligentes sejam controlados de acordo com o perfil. O Fog Computing oferece a possibilidade de usar recursos distribuídos na rede interna ou em sua borda. A computação em nuvem oferece a possibilidade de usar recursos de computação praticamente infinitos. A solução proposta envolve câmeras de vídeo, um dispositivo inteligente, um sistema de registro e um módulo de treinamento, conforme mostrado na Figura 1

![[Pasted image 20250611173758.png]]
1) Interface do usuário (UI): A interface do usuário (UI) é o ambiente no qual o usuário pode interagir com a funcionalidade de registro do sistema. Esse componente é utilizado em nuvem. O registro das pessoas ocorrerá no UIMS [Dutra et al.]. O UIMS enviará ao orquestrador as imagens a serem usadas no treinamento do algoritmo. 
2) Orquestrador: o orquestrador é instalado utilizando arquitetura de Fog computing perfeitamente com outros dispositivos. Ele tira proveito do recurso de composição de Fog, como alocação de recursos e proximidade do usuário.
3)  Módulo de Treinamento utilizando Fog: o módulo de treinamento pode ser instalado em um datacenter em nuvem remoto ou em um datacenter de rede local. Sua responsabilidade é receber o registro e o treinamento do algoritmo que será enviado aos dispositivos inteligentes. Esse transformará as imagens em casamentos de 128 dimensões, gerando um arquivo pickle que salvará todas as informações no formato de bytes. Este arquivo contém informações sobre cada foto no formato de incorporação, garantindo que cada imagem seja exclusiva no conjunto de dados gerado anteriormente.
4) Câmeras de vídeo: As câmeras de vídeo devem estar operando no ambiente físico a ser monitorado, conectado ao SmartDevice por conexão USB ou LAN. É importante ressaltar que as câmerasIP podem ser instaladas na rede local ou na Internet, mas sua operação será dificultada pela maior latência inerente a esse ambiente.
5) Dispositivo inteligente: o dispositivo inteligente instalado na rede local interage com as câmeras via interface USB ou interface IP, desde que seja possível acessar o streaming de vídeo através de qualquer uma dessas interfaces.

O dispositivo inteligente consiste em módulos de detecção, identificação, sincronização e notificação. Existem dois dispositivos físicos locais para processamento distribuído, um para detecção de face e outro para classificação de face. Quando faces conhecidas são encontradas, elas são enviadas para um módulo de sincronização na nuvem para possíveis alertas. O fluxo da imagem é submetido a um método de detecção de rosto chamado Histogramas de Gradientes Orientados (HOG) [Dalal & Triggs], que detecta a presença de rostos em um quadro. Quando um rosto é detectado em uma imagem, ele é destacado e enviado ao módulo de identificação via soquete TCP. Mais de uma face pode ser identificada ao mesmo tempo, encontrando cenários com mais de uma pessoa na porta por vez. As imagens dos rostos identificados, serão convertidas em 68 pontos para o alinhamento do rosto a partir do algoritmo chamado estimativa do marco da face [Kazemi & Sullivan]. Logo após esse alinhamento, é gerada uma incorporação 128-D compacta, usando um modelo pré-treinado, baseado na função de perda baseada em tripletos, a partir do método apresentado em [Schroff & Philbin]. O modelo foi pré-treinado e disponibilizado pelo projeto OpenFace [Amos & Satyanarayanan]. Após gerar esses pontos, usamos um classificador chamado SVM (Support Vector Machine) [Rüping] para comparar os 128 componentes de face encontrados com os rostos registrados em seu banco de dados. Esta análise pode resultar em identificação do usuário ou informar que não existe esse rosto cadastrado na base de dados. O módulo de notificação envia ao IoT Middleware que alguém entrou na sala. Será enviado junto com a mensagem, a foto capturada pela câmera e o nome da pessoa reconhecida. Se a pessoa não tiver sido identificada, o nome desconhecido será enviado. Também é enviada uma notificação ao programa de mensagens instantâneas para facilitar a visualização do evento pelo usuário. O módulo de sincronização é responsável pela comunicação com o nó Fog e a nuvem para receber atualizações do banco de dados e enviar telemetria de integridade do dispositivo para esse controlador. Esse processo é descrito em mais detalhes na Seção 3.3.

**3.3 Processamento dos Dados e Sincronização**

O treinamento de modelos de aprendizado de máquina e análise de vídeo são atividades que exigem muitos recursos computacionais de processamento, armazenamento e largura de banda da rede. Com o objetivo de simplificar e diminuir os custos da solução, optamos por aproveitar os recursos dos paradigmas de IoT e Fog Computing, e os principais recursos explorados em nossa solução foram a distribuição de recursos e a cooperação de dispositivos. A distribuição de recursos ocorre porque as atividades que exigem mais recursos computacionais são executadas em computadores remotos, baseados em nevoeiro ou na nuvem. O resultado desse processamento é propagado para recursos com menos poder de processamento, como o Smart Device. O Fog Trainer busca dados do banco de dados de middleware da IoT e realiza o treinamento. Esse novo treinamento é enviado para as câmerasinteligentes que fazem parte da rede. A Smart Câmera envia a telemetria de sua operação ao Fog Trainer para apoiar sua decisão sobre o treinamento a ser realizado.

Por fim, o dispositivo remoto irá fazer consultas periódicas ao controlador Fog, verificando uma nova versão do algoritmo treinado para download. Depois de obter o algoritmo treinado, o dispositivo inteligente transmitirá dados das câmeras locais para iniciar o processo de reconhecimento de rosto.